<!DOCTYPE html>
<html lang="en" data-theme="breeze">
<head>
  <meta charset="UTF-8" />
  <title>Study Planner ‚Äì Confidence Table</title>
  <meta name="description" content="Study Planner: local-first study board with tasks, confidence tracking, Pomodoro sessions, and a daily schedule view." />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2f62f4" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5073064276683221"
     crossorigin="anonymous"></script>
  <script>
    (function() {
      try {
        const adsDisabled = localStorage.getItem("studyAdsDisabled_v1") === "1";
        if (adsDisabled) document.documentElement.classList.add("ads-disabled");
      } catch (e) {}
    })();
  </script>
  <script>
    (function() {
      try {
        const savedTheme = localStorage.getItem("studyTheme_v1");
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
        }
      } catch (e) {}
    })();
  </script>
  <script src="./src/access-gate.js"></script>
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="icon" href="/icons/icon-192.png" type="image/png" sizes="192x192" />
  <link rel="icon" href="/icons/app-icon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
  <script defer src="/pwa.js"></script>
  <link rel="stylesheet" href="./src/styles/main.css" />
  <link rel="stylesheet" href="./src/styles/mobile.css" />
  <link rel="stylesheet" href="./src/styles/ipad.css" />
  <link rel="stylesheet" href="./src/styles/phone.css" />
  <link rel="stylesheet" href="./src/styles/phone-bottom-nav.css" />
  <link rel="stylesheet" href="./src/styles/phone-menu.css" />
  <link rel="stylesheet" href="./src/styles/phone-modals.css" />
  <link rel="stylesheet" href="./src/styles/a11y.css" />
  <link rel="stylesheet" href="./src/styles/enhancements.css" />
  <link rel="stylesheet" href="./src/styles/insights.css" />
  <link rel="stylesheet" href="./src/styles/res-1200x800.css" />
  <link rel="stylesheet" href="./src/styles/res-1280x720.css" />
  <link rel="stylesheet" href="./src/styles/res-1365x800.css" />
  <link rel="stylesheet" href="./src/styles/res-1366x768.css" />
  <link rel="stylesheet" href="./src/styles/res-1440x900.css" />
  <link rel="stylesheet" href="./src/styles/res-1536x864.css" />
  <link rel="stylesheet" href="./src/styles/res-1600x900.css" />
  <link rel="stylesheet" href="./src/styles/res-1680x1050.css" />
  <link rel="stylesheet" href="./src/styles/res-1920x1080.css" />
  <link rel="stylesheet" href="./src/styles/res-1920x1200.css" />
  <link rel="stylesheet" href="./src/styles/res-2560x1080.css" />
  <link rel="stylesheet" href="./src/styles/res-2560x1440.css" />
  <link rel="stylesheet" href="./src/styles/res-2560x1600.css" />
  <link rel="stylesheet" href="./src/styles/res-3440x1440.css" />
  <link rel="stylesheet" href="./src/styles/res-5120x1440.css" />
  <script defer src="./src/shared/sessionHeader.js"></script>
</head>
  <body>
	  <!-- SECTION: Ads Columns -->
	  <aside class="ad-column ad-column-left" aria-label="Advertisement column" data-section="ads-left">
	    <div class="ad-embed" aria-label="Advertisement">
	      <iframe
	        class="ad-frame ad-frame-160x600"
	        title="Advertisement"
	        loading="lazy"
	        sandbox="allow-scripts"
	        referrerpolicy="no-referrer"
	      ></iframe>
	      <script>
	        (function () {
	          try {
	            if (localStorage.getItem("studyAdsDisabled_v1") === "1") return;
	          } catch {}
	          const frame = document.currentScript?.previousElementSibling;
	          if (frame && frame.tagName === "IFRAME") frame.src = "./ad-highperformance-160x600.html";
	        })();
	      </script>
	    </div>
	  </aside>
	  <aside class="ad-column ad-column-right" aria-label="Advertisement column" data-section="ads-right">
	    <div class="ad-embed" aria-label="Advertisement">
	      <iframe
	        class="ad-frame ad-frame-160x600"
	        title="Advertisement"
	        loading="lazy"
	        sandbox="allow-scripts"
	        referrerpolicy="no-referrer"
	      ></iframe>
	      <script>
	        (function () {
	          try {
	            if (localStorage.getItem("studyAdsDisabled_v1") === "1") return;
	          } catch {}
	          const frame = document.currentScript?.previousElementSibling;
	          if (frame && frame.tagName === "IFRAME") frame.src = "./ad-highperformance-160x600.html";
	        })();
	      </script>
	    </div>
	  </aside>

  <!-- SECTION: App Root -->
  <div class="app" id="appRoot" data-section="app-root">
    <div id="sessionHeaderMount" data-section="session-header-mount"></div>

    <!-- SECTION: Main Header Bar -->
    <div class="header-row" id="mainHeaderBar" data-section="header-bar">
      <div class="header-main">
        <h1>Study Planner</h1>
      </div>
      <div class="header-actions">
        <div class="view-toggle" role="tablist" aria-label="Choose view" data-section="view-toggle">
          <button class="view-toggle-btn view-toggle-active" id="viewBoardBtn" type="button" aria-selected="true">
            Board
          </button>
          <button class="view-toggle-btn" id="viewScheduleBtn" type="button" aria-selected="false">
            Daily schedule
          </button>
        </div>
        <div class="header-quick-dropdown" id="quickJumpDropdown" data-section="study-hubs-dropdown">
          <button class="header-quick-trigger" id="quickJumpTrigger" type="button" aria-haspopup="true" aria-expanded="false">
            <span class="header-quick-label">Study hubs</span>
            <span class="header-quick-caret" aria-hidden="true">‚åÑ</span>
          </button>
				          <div class="header-quick-panel" id="quickJumpPanel">
				            <a class="header-quick-item" href="./calendar.html">Calendar</a>
				            <a class="header-quick-item" href="./stundenplan.html">Stundenplan</a>
				          </div>
        </div>
	        <div class="confidence-toggle" role="group" aria-label="Confidence mode" data-section="confidence-toggle">
	          <button class="confidence-toggle-btn confidence-toggle-active" id="manualConfBtn" type="button" data-mode="manual">
	            Your confidence
	          </button>
	          <button class="confidence-toggle-btn" id="perceivedConfBtn" type="button" data-mode="perceived">
	            Calculated
	          </button>
	        </div>
	        <button class="btn" id="headerAuthBtn" type="button">Login / Register</button>
	        <div class="header-menu" id="headerMenu" aria-label="Menu" data-section="header-menu">
	          <button class="header-menu-toggle" id="headerMenuToggle" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Open menu">
	            ‚ãØ
	          </button>
          <div class="header-menu-panel" id="headerMenuPanel">
            <div class="header-menu-group mobile-menu-only">
              <a class="header-menu-link" href="./index.html?mode=board">Board</a>
              <a class="header-menu-link" href="./index.html?mode=subjects">Subjects</a>
              <a class="header-menu-link" href="./index.html?mode=today">Today's focus</a>
              <a class="header-menu-link" href="./index.html?mode=schedule">Daily schedule</a>
            </div>
            <div class="header-menu-divider mobile-menu-only"></div>
			            <div class="header-menu-group mobile-menu-only">
			              <div class="header-menu-subtitle">Study hubs</div>
			              <a class="header-menu-link" href="./calendar.html">Calendar</a>
			              <a class="header-menu-link" href="./stundenplan.html">Stundenplan</a>
            </div>
            <div class="header-menu-divider mobile-menu-only"></div>
            <div class="header-menu-group">
              <button class="header-menu-item" id="headerProfileBtn" type="button" hidden>Profile</button>
              <button class="header-menu-item" id="headerSettingsBtn" type="button">Settings</button>
            </div>
	            <div class="header-menu-divider"></div>
	            <div class="header-menu-group">
	              <button class="header-menu-link" id="openSuggestionsBtn" type="button">Suggestions</button>
	              <button class="header-menu-link" id="openStatsBtn" type="button">Study stats</button>
	            </div>
	          </div>
	        </div>
	      </div>
	    </div>

    <!-- SECTION: Settings Modal -->
    <div class="settings-modal" id="settingsModal" aria-hidden="true" data-section="settings-modal">
      <div class="settings-backdrop" id="settingsModalBackdrop"></div>
      <div class="settings-dialog" role="dialog" aria-modal="true" aria-labelledby="settingsModalTitle">
        <div class="settings-head">
          <div>
            <div class="settings-label">Settings</div>
            <div class="settings-title" id="settingsModalTitle">Customize your space</div>
            <div class="settings-subtitle">Theme, colors, and preferences in one place.</div>
          </div>
          <button class="btn btn-secondary" id="settingsModalCloseBtn" type="button">Close</button>
        </div>
        <div class="settings-body">
          <div class="settings-nav" id="settingsNav">
            <button class="settings-nav-item settings-nav-active" data-panel="settingsThemePanel" type="button">Theme</button>
            <button class="settings-nav-item" data-panel="settingsColorsPanel" type="button">Colors</button>
            <button class="settings-nav-item" data-panel="settingsPrefsPanel" type="button">Preferences</button>
            <button class="settings-nav-item" data-panel="settingsDataPanel" type="button">Data</button>
          </div>
          <div class="settings-panels">
            <div class="settings-panel settings-panel-active" id="settingsThemePanel">
              <div class="settings-panel-title">Theme</div>
              <p class="settings-panel-text">Switch between available themes. Use the list below to apply instantly.</p>
              <div class="settings-theme-list" id="settingsThemeList"></div>
              <button class="btn" id="settingsThemePickerBtn" type="button">Open theme picker</button>
            </div>
            <div class="settings-panel" id="settingsColorsPanel">
              <div class="settings-panel-title">Colors</div>
              <p class="settings-panel-text">Adjust the palette used for subjects and the style of confidence/study bars.</p>
              <div class="settings-colors-list" id="settingsColorsList"></div>
              <div class="settings-pref-grid">
                <label>
                  Confidence bar style
                  <select id="settingsMeterStyleSelect">
                    <option value="classic">Classic gradient</option>
                    <option value="flat">Flat colors</option>
                    <option value="stripe">Striped</option>
                    <option value="single">Single color</option>
                    <option value="customGradient">Custom gradient</option>
                  </select>
                </label>
                <label>
                  Meter color (single)
                  <input type="color" id="settingsMeterSingleInput" value="#f97373" />
                </label>
                <label>
                  Gradient start
                  <input type="color" id="settingsMeterGradStartInput" value="#f97373" />
                </label>
                <label>
                  Gradient end
                  <input type="color" id="settingsMeterGradEndInput" value="#22c55e" />
                </label>
                <label>
                  Study bar style
                  <select id="settingsStudyBarStyleSelect">
                    <option value="rounded">Rounded</option>
                    <option value="flat">Flat</option>
                    <option value="stripe">Striped</option>
                  </select>
                </label>
              </div>
              <div class="settings-preview" id="settingsPreview">
                <div class="settings-preview-title">Preview</div>
                <div class="settings-preview-meter">
                  <div class="settings-preview-label">Overall confidence</div>
                  <div class="summary-progress-bar">
                    <div class="summary-progress-fill meter-mid" id="settingsPreviewMeterFill" style="width:65%"></div>
                  </div>
                </div>
                <div class="settings-preview-study">
                  <div class="settings-preview-label">Today's study</div>
                  <div class="summary-study-bar" id="settingsPreviewStudyBar"></div>
                </div>
              </div>
              <div class="settings-colors-actions">
                <button class="btn btn-secondary" id="settingsColorsResetBtn" type="button">Reset palette</button>
                <button class="btn" id="settingsColorsSaveBtn" type="button">Save colors & styles</button>
              </div>
            </div>
            <div class="settings-panel" id="settingsPrefsPanel">
              <div class="settings-panel-title">Preferences</div>
              <p class="settings-panel-text">Choose language, accessibility, and tweak study timers.</p>
              <div class="settings-pref-row">
                <label>
                  Language
                  <select id="settingsLanguageSelect">
                    <option value="en">English</option>
                    <option value="de">Deutsch</option>
                  </select>
                </label>
              </div>
              <div class="settings-pref-row settings-pref-grid">
                <label>
                  Contrast
                  <select id="settingsContrastSelect">
                    <option value="normal">Normal</option>
                    <option value="high">High contrast</option>
                    <option value="low">Low contrast</option>
                  </select>
                </label>
                <label>
                  Colorblind-friendly colors
                  <select id="settingsCvdSelect">
                    <option value="none">Off</option>
                    <option value="safe">On</option>
                  </select>
                </label>
              </div>
              <div class="settings-pref-row settings-pref-grid">
                <label>
                  Study length (minutes)
                  <input type="number" id="settingsStudyMinutes" min="1" />
                </label>
                <label>
                  Short break (minutes)
                  <input type="number" id="settingsShortMinutes" min="1" />
                </label>
                <label>
                  Long break (minutes)
                  <input type="number" id="settingsLongMinutes" min="1" />
                </label>
              </div>
	              <div class="settings-panel-subtitle">Time budget</div>
              <p class="settings-panel-text">Optional guardrails: warn or stop when exceeding your limits.</p>
              <div class="settings-pref-row settings-pref-grid">
                <label>
                  Daily max (minutes, 0 = off)
                  <input type="number" id="budgetDailyMax" min="0" step="15" value="0" />
                </label>
                <label>
                  Weekly max (minutes, 0 = off)
                  <input type="number" id="budgetWeeklyMax" min="0" step="30" value="0" />
                </label>
                <label>
                  Mode
                  <select id="budgetMode">
                    <option value="warn">Warn only</option>
                    <option value="hard">Hard stop (no new sessions)</option>
                  </select>
                </label>
              </div>
	              <div class="settings-panel-subtitle">Notifications</div>
              <p class="settings-panel-text">In-app toasts always work; system notifications require permission (https/localhost).</p>
	              <div class="settings-pref-row settings-pref-grid">
	                <label class="settings-check">
	                  <input id="notifEnableToasts" type="checkbox" checked />
	                  <span>Enable in-app toasts</span>
	                </label>
	                <label class="settings-check">
	                  <input id="notifEnableSystem" type="checkbox" />
	                  <span>Enable system notifications</span>
	                </label>
                <label>
                  Reminder lead time
                  <select id="notifLeadTime">
                    <option value="10">10 min</option>
                    <option value="30">30 min</option>
                    <option value="60">60 min</option>
                  </select>
                </label>
	                <label>
	                  Quiet hours
	                  <div class="settings-inline">
	                    <input id="notifQuietStart" type="time" value="22:00" />
	                    <span class="settings-inline-sep">to</span>
	                    <input id="notifQuietEnd" type="time" value="07:00" />
	                  </div>
	                </label>
              </div>
              <div class="settings-colors-actions">
                <button class="btn" id="settingsPrefsSaveBtn" type="button">Save preferences</button>
              </div>
            </div>
            <div class="settings-panel" id="settingsDataPanel">
              <div class="settings-panel-title">Data safety</div>
              <p class="settings-panel-text">
                Export a full local backup (JSON). Import validates first and creates an automatic snapshot so you can undo. Snapshots are stored locally on this device.
              </p>
              <div class="settings-pref-grid">
                <label>
                  Export
                  <button class="btn" id="settingsExportBtn" type="button">Export my data</button>
                </label>
                <label>
                  Import file
                  <input id="settingsImportFile" type="file" accept="application/json" />
                </label>
                <label>
                  Import mode
                  <select id="settingsImportMode">
                    <option value="merge">Merge (recommended)</option>
                    <option value="replace">Replace (delete missing keys)</option>
                  </select>
                </label>
                <label>
                  Import
                  <button class="btn btn-secondary" id="settingsImportBtn" type="button">Import data‚Ä¶</button>
                </label>
              </div>
              <div class="settings-data-actions">
                <button class="btn btn-secondary" id="settingsSnapshotNowBtn" type="button">Create snapshot now</button>
              </div>
              <div class="settings-data-status" id="settingsDataStatus" role="status" aria-live="polite"></div>
	              <div class="settings-data-snapshots">
	                <div class="settings-panel-subtitle">Local snapshots (last 12)</div>
	                <div id="settingsSnapshotList"></div>
	              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SECTION: Planner Page -->
    <div class="plannerPage" id="plannerPage" data-section="planner-page">
      <!-- SECTION: Planner Header (Summary + Focus) -->
      <section class="plannerHeader" id="plannerHeaderSection" data-section="planner-header">
        <!-- Top row: Summary + Focus -->
        <div class="top-row">
          <div class="top-ad-slot" aria-label="Advertisement column"></div>
          <!-- Summary -->
          <div class="summary-card" id="summaryCard" data-section="daily-stats">
            <div class="summary-top">
              <div class="summary-metrics">
                <div class="summary-block">
                  <div class="summary-label">Subjects</div>
                  <div class="summary-value" id="summarySubjects">0</div>
                </div>
                <div class="summary-block">
                  <div class="summary-label">Files</div>
                  <div class="summary-value" id="summaryFiles">0</div>
                </div>
                <div class="summary-block">
                  <div class="summary-label">Low confidence (&lt; 40%)</div>
                  <div class="summary-value" id="summaryLow">0</div>
                </div>
              </div>
            </div>
          <div class="summary-progress">
            <div class="summary-progress-header">
              <span>Overall confidence</span>
              <span id="summaryConfLabel">0%</span>
            </div>
            <div class="summary-progress-bar">
              <div class="summary-progress-fill meter-low" id="summaryConfFill"></div>
              <div class="summary-ring-value" id="summaryConfValue">0%</div>
            </div>
          </div>
          <div class="summary-goal">
            <div class="summary-goal-header">
              <div>
                <div class="summary-label">Weekly target</div>
                <div class="summary-goal-line">
                  <span class="summary-goal-amount" id="weeklyGoalProgressLabel">0 h</span>
                  <span class="summary-goal-divider">/</span>
                  <span class="summary-goal-total" id="weeklyGoalTotalLabel">0 h</span>
                </div>
              </div>
              <button class="chip-btn chip-btn-primary" id="editGoalBtn" type="button">Set goal</button>
            </div>
            <div class="summary-goal-track">
              <div class="summary-goal-fill" id="weeklyGoalFill"></div>
              <div class="summary-ring-value" id="weeklyGoalValue">0 h</div>
            </div>
            <div class="summary-goal-footer">
              <div class="summary-goal-hint" id="weeklyGoalHint">Set a target to get a weekly rhythm.</div>
              <div class="summary-streak">
                <div class="summary-streak-icon">üî•</div>
                <div class="summary-streak-text">
                  <div class="summary-streak-label">Daily streak</div>
                  <div class="summary-streak-value">
                    <span id="streakCurrentLabel">0 days</span>
                    <span class="summary-streak-sep">¬∑</span>
                    <span id="streakBestLabel">Best 0</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="summary-study">
            <div class="summary-study-header">
              <span>Today's study time</span>
              <span id="summaryStudyTodayLabel">0 min</span>
            </div>
              <div class="summary-study-bar" id="summaryStudyBar" role="button" tabindex="0" aria-label="Open today's study stats">
                <div class="summary-ring-value" id="summaryStudyValue">0 min</div>
              </div>
              <div class="summary-study-legend" id="summaryStudyLegend"></div>
            </div>
  	      </div>

          <!-- Focus timer -->
          <div class="focus-card" id="focusCard" data-section="focus-session">
            <div class="focus-main">
              <div class="focus-left">
                <div class="focus-label">Focus session</div>
                <div class="focus-title" id="focusSessionTitle">No active session</div>
                <div class="focus-subtitle" id="focusSessionSubtitle">
                  Click ‚ÄúStudy‚Äù on a file or start a break below.
                </div>
                <div class="focus-session-controls" id="focusSessionControls">
                  <span style="font-size:0.75rem;color:#9ca3af;">No controls ‚Äì start a session.</span>
                </div>
              </div>
              <div class="focus-right">
                <div class="focus-timer-toggle" role="group" aria-label="Timer mode">
                  <button class="focus-timer-mode-btn focus-timer-active" id="timerModeCountdownBtn" type="button" data-mode="countdown">Countdown</button>
                  <button class="focus-timer-mode-btn" id="timerModeStopwatchBtn" type="button" data-mode="stopwatch">Stopwatch</button>
                </div>
                <div class="focus-timer-box">
                  <div class="focus-timer-label-small" id="focusTimerLabel">Countdown</div>
                  <div class="focus-timer-display" id="focusTimerDisplay">00:00:00</div>
                </div>
              </div>
            </div>
            <div class="focus-bottom">
              <button class="focus-break-btn" id="openTimerSettingsBtn" type="button">Timer settings</button>
              <div class="focus-break-buttons">
                <button class="focus-break-btn" id="startShortBreakBtn" type="button">Short break</button>
                <button class="focus-break-btn" id="startLongBreakBtn" type="button">Long break</button>
              </div>
            </div>
          <div class="focus-inline-settings" id="timerInlinePanel" hidden>
            <div class="focus-inline-title">Adjust your timers</div>
            <div class="focus-inline-grid">
              <label>
                Study (minutes)
                <input type="number" id="timerInlineStudy" min="1" />
              </label>
              <label>
                Short break
                <input type="number" id="timerInlineShort" min="1" />
              </label>
              <label>
                Long break
                <input type="number" id="timerInlineLong" min="1" />
              </label>
            </div>
            <div class="focus-inline-actions">
              <button class="btn btn-secondary" id="timerInlineCancel" type="button">Cancel</button>
              <button class="btn" id="timerInlineSave" type="button">Save</button>
            </div>
          </div>
        </div>
        </div>
      </section>

      <!-- SECTION: Planner Lower (Subjects + Today + Schedule) -->
      <section class="plannerLower" id="plannerLowerSection" data-section="planner-lower">
        <!-- Controls placeholder -->
        <div class="controls"></div>

        <div class="layout-row" id="layoutRow" data-section="layout-row">
          <div class="main-area" data-section="subjects-area">
            <!-- Table -->
            <div class="table-wrapper" data-section="subjects-table">
              <div class="subject-scroll">
                <div class="section-heading">
                    <div class="section-heading-text">
                      <h2 class="section-title">Subjects</h2>
                      <div class="section-title-meta">
                        <span id="summarySubjectsHeader">0</span> subjects ¬∑
                        <span id="summaryFilesHeader">0</span> files
                      </div>
                    </div>
                  <div class="section-actions">
                    <button class="subject-nav-btn mobile-menu-only" id="subjectBackBtn" type="button" aria-label="Back">‚Üê</button>
                    <button class="subject-nav-btn mobile-menu-only" id="subjectPrevBtn" type="button" aria-label="Previous subject">‚Äπ</button>
                    <div class="subject-nav-label mobile-menu-only" id="subjectNavLabel" aria-hidden="true"></div>
                    <button class="subject-nav-btn mobile-menu-only" id="subjectNextBtn" type="button" aria-label="Next subject">‚Ä∫</button>
                    <button class="subject-scroll-head-btn" id="subjectScrollLeftBtn" type="button" aria-label="Scroll subjects left">‚Äπ</button>
                    <button class="subject-scroll-head-btn" id="subjectScrollRightBtn" type="button" aria-label="Scroll subjects right">‚Ä∫</button>
                    <button class="section-max-btn" id="maximizeSubjectsBtn" type="button" aria-pressed="false" aria-label="Maximize subjects">‚§¢</button>
                  </div>
                </div>
                <div id="subjectTable" class="subject-table"></div>
              </div>
            </div>
            <div class="empty-hint" id="emptyHint">
              No subjects yet. Use ‚ÄúAdd subject‚Äù on the right to create your first subject.
            </div>
          </div>

          <aside class="today-sidebar" id="todaySidebar" data-section="today-sidebar">
            <div class="today-section">
              <div class="today-header">
                <div class="today-header-text">
                  <h2 class="sr-only">Today's focus</h2>
                </div>
                <div class="today-header-actions"></div>
              </div>
              <div class="today-dropzone" id="todayDropZone">
                Drag to add.
              </div>
              <div class="today-list" id="todayList"></div>
            </div>
          </aside>
        </div>

        <div class="schedule-view" id="scheduleView" hidden data-section="schedule-view">
          <div class="schedule-bar">
            <div>
              <div class="schedule-title">Daily focus timeline</div>
              <div class="schedule-subtitle">
                Each column is a day. Today mirrors "Today's focus"; past days keep their history.
              </div>
            </div>
            <div class="schedule-actions">
              <button class="chip-btn chip-btn-primary" id="scheduleTodayBtn" type="button">This week</button>
              <button class="chip-btn" id="scheduleWeekendToggleBtn" type="button" aria-pressed="false">Show weekend</button>
              <div class="schedule-nav">
                <button class="schedule-nav-btn" id="schedulePrevWeekBtn" type="button" aria-label="Previous week">‚Äπ</button>
                <div class="schedule-range" id="scheduleRangeLabel">This week</div>
                <button class="schedule-nav-btn" id="scheduleNextWeekBtn" type="button" aria-label="Next week">‚Ä∫</button>
              </div>
            </div>
          </div>
          <div class="schedule-grid" id="scheduleGrid"></div>
        </div>
      </section>
	    </div>

	    <!-- Login / Register Modal -->
	    <div class="modal-backdrop" id="authModalBackdrop" hidden data-section="modal-auth">
	      <div class="modal auth-modal" role="dialog" aria-modal="true" aria-labelledby="authModalTitle">
	        <div class="modal-header">
	          <div>
	            <div class="modal-title" id="authModalTitle">Login / Register</div>
	            <div class="modal-subtitle" id="authModalSubtitle">Sign in to access your account. Premium unlocks cloud sync + backups.</div>
	          </div>
	          <button class="modal-close-btn" id="authModalCloseBtn" aria-label="Close">‚úï</button>
	        </div>
	        <div class="modal-body">
	          <div class="modal-field-row">
	            <div class="modal-field-label">Email</div>
	            <input class="notice-input" id="authModalEmail" type="email" placeholder="you@example.com" autocomplete="email" />
	          </div>
	          <div class="modal-field-row">
	            <div class="modal-field-label">Password</div>
	            <input class="notice-input" id="authModalPassword" type="password" placeholder="Minimum 8 characters" autocomplete="current-password" />
	            <div class="auth-modal-hint" id="authModalHint">Password must be at least 8 characters.</div>
	          </div>
	          <div class="auth-modal-divider" aria-hidden="true"><span>or</span></div>
	          <div class="auth-provider-grid">
	            <button class="btn btn-secondary auth-provider-btn" id="authModalGoogleBtn" type="button">Continue with<span class="sr-only"> Google</span></button>
	            <button class="btn btn-secondary auth-provider-btn" id="authModalAppleBtn" type="button">Continue with Apple</button>
	            <button class="btn btn-secondary auth-provider-btn" id="authModalOtherBtn" type="button">Other services‚Ä¶</button>
	          </div>
	          <div class="auth-modal-msg" id="authModalMsg" aria-live="polite"></div>
	        </div>
	        <div class="modal-footer auth-modal-footer">
	          <button class="btn btn-secondary" id="authModalRegisterBtn" type="button">Register</button>
	          <button class="btn" id="authModalLoginBtn" type="button">Login</button>
	        </div>
	      </div>
	    </div>

	    <!-- Add-to-Today Modal -->
	    <div class="modal-backdrop" id="addTodoModalBackdrop" hidden data-section="modal-add-to-today">
	      <div class="modal" role="dialog" aria-modal="true">
	        <div class="modal-header">
	          <div>
            <div class="modal-title" id="addTodoModalTitle">Add to Today</div>
            <div class="modal-subtitle" id="addTodoModalSubtitle">
              Add optional subtasks before sending this item to Today.
            </div>
          </div>
          <button class="modal-close-btn" id="addTodoModalClose" aria-label="Close">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="modal-field">
            <div class="modal-field-label">Subtasks (optional)</div>
            <div class="subtask-input-row">
              <input type="text" id="addTodoSubtaskInput" placeholder="Type a subtask and press Enter" />
              <button class="chip-btn chip-btn-primary" id="addTodoSubtaskAdd" type="button">+</button>
            </div>
            <div class="subtask-list" id="addTodoSubtaskList"></div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="spacer"></div>
          <button class="btn btn-secondary" id="addTodoModalCancel" type="button">Cancel</button>
          <button class="btn" id="addTodoModalSave" type="button">Add to Today</button>
        </div>
      </div>
    </div>

    <!-- Schedule Task Modal -->
    <div class="modal-backdrop" id="scheduleTaskModalBackdrop" hidden data-section="modal-schedule-task">
      <div class="modal" role="dialog" aria-modal="true">
        <div class="modal-header">
          <div>
            <div class="modal-title" id="scheduleTaskModalTitle">Task</div>
            <div class="modal-subtitle" id="scheduleTaskModalSubtitle">Subtasks for this focus item.</div>
          </div>
          <button class="modal-close-btn" id="scheduleTaskCloseBtn" aria-label="Close">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="schedule-task-subtasks" id="scheduleTaskModalSubtasks"></div>
        </div>
        <div class="modal-footer">
          <div class="spacer"></div>
          <button class="btn" id="scheduleTaskStudyBtn" type="button">Study</button>
        </div>
      </div>
    </div>

    <!-- Schedule Manual Todo Modal -->
    <div class="modal-backdrop" id="scheduleManualTodoModalBackdrop" hidden data-section="modal-schedule-manual-todo">
      <div class="modal" role="dialog" aria-modal="true">
        <div class="modal-header">
          <div>
            <div class="modal-title" id="scheduleManualTodoModalTitle">Add todo</div>
            <div class="modal-subtitle" id="scheduleManualTodoModalSubtitle">Create a custom todo for the selected day.</div>
          </div>
          <button class="modal-close-btn" id="scheduleManualTodoModalClose" aria-label="Close">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="modal-field-row">
            <label for="scheduleManualTodoTypeSelect">Add</label>
            <select id="scheduleManualTodoTypeSelect">
              <option value="custom_todo">Custom todo</option>
              <option value="subject_todo">Todo from subjects</option>
              <option value="deadline">Deadline (sync to calendar)</option>
            </select>
          </div>

          <div class="modal-field-row">
            <label id="scheduleManualTodoNameLabel" for="scheduleManualTodoNameInput">Title</label>
            <input
              type="text"
              id="scheduleManualTodoNameInput"
              placeholder="e.g. Write summary / Prepare slides"
              autocomplete="off"
            />
          </div>

          <div class="modal-field-row" id="scheduleManualTodoSubjectRow" hidden>
            <label for="scheduleManualTodoSubjectSelect">Subject</label>
            <select id="scheduleManualTodoSubjectSelect"></select>
          </div>

          <div class="modal-field-row" id="scheduleManualTodoFileRow" hidden>
            <label for="scheduleManualTodoFileSelect">Task</label>
            <select id="scheduleManualTodoFileSelect"></select>
          </div>

          <div id="scheduleManualTodoDeadlineFields" hidden>
            <div class="modal-field-row">
              <label for="scheduleManualTodoDeadlineTime">Time (optional)</label>
              <input type="time" id="scheduleManualTodoDeadlineTime" step="60" />
            </div>
            <div class="modal-field-row modal-row-inline">
              <div>
                <label for="scheduleManualTodoDeadlineType">Type</label>
                <select id="scheduleManualTodoDeadlineType">
                  <option value="deadline">Deadline</option>
                  <option value="exam">Exam / quiz</option>
                  <option value="study">Study block</option>
                  <option value="reminder">Reminder</option>
                </select>
              </div>
              <div>
                <label for="scheduleManualTodoDeadlinePriority">Priority</label>
                <select id="scheduleManualTodoDeadlinePriority">
                  <option value="normal">Normal</option>
                  <option value="important">Important</option>
                  <option value="critical">Critical</option>
                </select>
              </div>
            </div>
          </div>

          <div class="modal-field">
            <div class="modal-field-label">Subtasks (optional)</div>
            <div class="subtask-input-row">
              <input
                type="text"
                id="scheduleManualTodoSubtaskInput"
                placeholder="Type a subtask and press Enter"
                autocomplete="off"
              />
              <button class="chip-btn chip-btn-primary" id="scheduleManualTodoSubtaskAdd" type="button">+</button>
            </div>
            <div class="subtask-list" id="scheduleManualTodoSubtaskList"></div>
          </div>
        </div>
        <div class="modal-footer">
          <div class="spacer"></div>
          <button class="btn btn-secondary" id="scheduleManualTodoModalCancel" type="button">Cancel</button>
          <button class="btn" id="scheduleManualTodoModalSave" type="button">Add todo</button>
        </div>
      </div>
    </div>
  </div>

  <!-- File Modal -->
  <div class="modal-backdrop" id="fileModalBackdrop" data-section="modal-file">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-header">
        <div>
          <div class="modal-title" id="fileModalTitle">Add file</div>
          <div class="modal-subtitle" id="fileModalSubtitle">Fill the details below and save.</div>
        </div>
        <button class="modal-close-btn" id="fileModalCloseBtn" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="modal-field-row">
          <label for="modalFileName">File / Topic</label>
          <input type="text" id="modalFileName" placeholder="e.g. Kapitel 3 Zusammenfassung.pdf" />
        </div>
        <div class="modal-field-row modal-row-inline">
          <div>
            <label for="modalSubjectSelect">Subject</label>
            <select id="modalSubjectSelect">
              <option value="">No subjects yet</option>
            </select>
          </div>
          <div>
            <label>Confidence</label>
            <div class="range-row">
              <input type="range" id="modalConfidenceRange" min="0" max="100" step="5" value="50" />
              <div class="range-value" id="modalConfidenceValue">50%</div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="modal-delete-btn" id="fileModalDeleteBtn" hidden>Delete file</button>
        <div class="spacer"></div>
        <button class="btn btn-secondary" id="fileModalCancelBtn" type="button">Cancel</button>
        <button class="btn" id="fileModalSaveBtn" type="button">Save</button>
      </div>
    </div>
  </div>

  <!-- Timer Settings Modal -->
  <div class="modal-backdrop" id="timerModalBackdrop" data-section="modal-timer-settings">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-header">
        <div>
          <div class="modal-title">Timer settings</div>
          <div class="modal-subtitle">
            Set durations for study sessions and breaks (Pomodoro style).
          </div>
        </div>
        <button class="modal-close-btn" id="timerModalCloseBtn" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="modal-field-row">
          <label for="timerStudyInput">Study session length (minutes)</label>
          <input type="number" id="timerStudyInput" min="1" />
        </div>
        <div class="modal-field-row">
          <label for="timerShortInput">Short break (minutes)</label>
          <input type="number" id="timerShortInput" min="1" />
        </div>
        <div class="modal-field-row">
          <label for="timerLongInput">Long break (minutes)</label>
          <input type="number" id="timerLongInput" min="1" />
        </div>
      </div>
      <div class="modal-footer">
        <div class="spacer"></div>
        <button class="btn btn-secondary" id="timerModalCancelBtn" type="button">Cancel</button>
        <button class="btn" id="timerModalSaveBtn" type="button">Save</button>
      </div>
    </div>
  </div>

  <!-- Stats Modal -->
  <div class="modal-backdrop" id="statsModalBackdrop" data-section="modal-study-stats">
    <div class="modal stats-modal" role="dialog" aria-modal="true">
      <div class="modal-header">
        <div>
          <div class="modal-title">Study stats</div>
          <div class="modal-subtitle">
            Totals, subjects, and top files based on tracked sessions.
          </div>
        </div>
        <button class="modal-close-btn" id="statsModalCloseBtn" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body" id="statsModalBody"></div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="openInsightsBtn" type="button">Insights</button>
        <div class="spacer"></div>
        <button class="btn btn-secondary" id="statsModalCloseBtn2" type="button">Close</button>
      </div>
    </div>
  </div>

  <!-- Subject Settings Modal -->
  <div class="modal-backdrop" id="subjectSettingsBackdrop" hidden data-section="modal-subject-settings">
    <div class="modal subject-settings-modal" role="dialog" aria-modal="true" aria-labelledby="subjectSettingsTitle">
      <div class="modal-header">
        <div>
          <div class="modal-title" id="subjectSettingsTitle">Subject settings</div>
          <div class="modal-subtitle">Rename the subject and adjust its color highlight.</div>
        </div>
        <button class="modal-close-btn" id="subjectSettingsCloseBtn" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="subject-settings-row">
          <label class="subject-settings-label" for="subjectSettingsNameInput">Subject name</label>
          <input type="text" id="subjectSettingsNameInput" />
        </div>
        <div class="subject-settings-row">
          <div class="subject-settings-label">Color</div>
          <div class="subject-settings-color">
            <div class="subject-settings-preview">
              <span class="subject-settings-dot" id="subjectSettingsDot"></span>
              <span class="subject-settings-preview-text" id="subjectSettingsColorLabel">Selected</span>
            </div>
            <div class="subject-swatch-grid" id="subjectSettingsSwatches"></div>
            <div class="subject-settings-custom">
              <label for="subjectSettingsCustomColor">Custom</label>
              <input type="color" id="subjectSettingsCustomColor" />
            </div>
          </div>
        </div>
        <div class="subject-settings-row">
          <label class="subject-settings-label" for="subjectSettingsStrength">Highlight strength</label>
          <input type="range" id="subjectSettingsStrength" min="0.05" max="0.6" step="0.05" />
        </div>
      </div>
      <div class="modal-footer">
        <div class="spacer"></div>
        <button class="btn btn-secondary" id="subjectSettingsCancelBtn" type="button">Cancel</button>
        <button class="btn" id="subjectSettingsSaveBtn" type="button">Save</button>
      </div>
    </div>
  </div>

  <!-- Notice Modal -->
  <div class="modal-backdrop" id="noticeModalBackdrop" hidden data-section="modal-notice">
    <div class="modal notice-modal" role="dialog" aria-modal="true">
      <div class="modal-header">
        <div class="modal-title" id="noticeModalTitle">Notice</div>
      </div>
      <div class="modal-body" id="noticeModalMessage"></div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="noticeModalCancelBtn" type="button">Cancel</button>
        <button class="btn" id="noticeModalConfirmBtn" type="button">Confirm</button>
      </div>
    </div>
  </div>
		  <!-- Suggestions Modal -->
			  <div class="modal-backdrop" id="suggestionModalBackdrop" hidden data-section="modal-suggestions">
		    <div class="modal suggestion-modal" role="dialog" aria-modal="true">
      <div class="modal-header">
        <div>
          <div class="modal-title">Study suggestions</div>
          <div class="modal-subtitle">Low confidence, deadlines, and spaced review.</div>
        </div>
        <button class="modal-close-btn" id="suggestionModalCloseBtn" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body suggestion-modal-body" id="suggestionModalBody">
        <div class="suggestion-modal-section">
          <div class="suggestion-modal-head">
            <div class="modal-title-sm">Spaced review soon</div>
            <div class="modal-subtle" id="dueSoonHint"></div>
          </div>
          <div class="due-soon-list" id="dueSoonList"></div>
        </div>
        <div class="suggestion-modal-section">
          <div class="suggestion-modal-head">
            <div class="modal-title-sm">Smart suggestions</div>
            <div class="today-suggestions-cap" id="suggestionsCapNote"></div>
          </div>
          <div class="today-suggestions-list" id="suggestionsList"></div>
        </div>
        <div class="suggestion-modal-section">
          <div class="suggestion-modal-head">
            <div class="modal-title-sm">Due for review</div>
            <div class="modal-subtle" id="unifiedReviewHint"></div>
          </div>
          <div class="today-suggestions-list" id="unifiedReviewList"></div>
	    </div>
		  </div>
	      <div class="modal-footer">
	        <div class="spacer"></div>
	        <button class="btn btn-secondary" id="suggestionModalCloseBtn2" type="button">Close</button>
	      </div>
    </div>
		  </div>

	  <!-- Today subtasks (compact view) Modal -->
		  <div class="modal-backdrop" id="subtasksModalBackdrop" hidden data-section="modal-today-subtasks">
	    <div class="modal subtasks-modal" role="dialog" aria-modal="true" aria-labelledby="subtasksModalTitle">
	      <div class="modal-header">
	        <div>
	          <div class="modal-title" id="subtasksModalTitle">Subtasks</div>
	          <div class="modal-subtitle" id="subtasksModalSubtitle"></div>
	        </div>
	        <button class="modal-close-btn" id="subtasksModalCloseBtn" aria-label="Close">‚úï</button>
	      </div>
	      <div class="modal-body" id="subtasksModalBody"></div>
	      <div class="modal-footer">
	        <div class="spacer"></div>
	        <button class="btn btn-secondary" id="subtasksModalCloseBtn2" type="button">Close</button>
	      </div>
	    </div>
	  </div>

	  <!-- Today stats modal -->
		  <div class="modal-backdrop" id="todayStatsModalBackdrop" hidden data-section="modal-today-stats">
	    <div class="modal insights-modal today-stats-modal" role="dialog" aria-modal="true" aria-labelledby="todayStatsModalTitle">
	      <div class="modal-header">
	        <div>
	          <div class="modal-title" id="todayStatsModalTitle">Today</div>
	          <div class="modal-subtitle" id="todayStatsModalSubtitle"></div>
	        </div>
	        <button class="modal-close-btn" id="todayStatsModalCloseBtn" aria-label="Close">‚úï</button>
	      </div>
	      <div class="modal-body" id="todayStatsModalBody"></div>
	      <div class="modal-footer">
	        <div class="spacer"></div>
	        <button class="btn btn-secondary" id="todayStatsModalCloseBtn2" type="button">Close</button>
	      </div>
	    </div>
	  </div>

	  <!-- Insights Modal -->
	  <div class="modal-backdrop" id="insightsBackdrop" hidden data-section="modal-insights">
	    <div class="modal insights-modal" role="dialog" aria-modal="true" aria-labelledby="insightsTitle">
      <div class="modal-header">
        <div>
          <div class="modal-title" id="insightsTitle">Insights</div>
          <div class="modal-subtitle">Useful signals from your sessions and plans.</div>
        </div>
        <button class="modal-close-btn" id="insightsCloseBtn" aria-label="Close">‚úï</button>
      </div>
      <div class="modal-body" id="insightsBody"></div>
      <div class="modal-footer">
        <div class="spacer"></div>
        <button class="btn btn-secondary" id="insightsCloseBtn2" type="button">Close</button>
      </div>
    </div>
  </div>

		  <div id="studyAriaLive" class="sr-only" aria-live="polite" aria-atomic="true" data-section="aria-live"></div>
		  <button class="scroll-top-btn" id="scrollTopBtn" type="button" aria-label="Scroll to top" data-section="scroll-top">‚Üë</button>

      <footer class="site-footer" aria-label="Site footer" data-section="site-footer">
        <div class="site-footer-inner">
          <div class="site-footer-meta">
            <div class="site-footer-title">Study Planner</div>
            <div class="site-footer-subtitle">Local-first planning with optional sync.</div>
          </div>
          <nav class="site-footer-links" aria-label="Legal">
            <a href="./about.html">About</a>
            <a href="./contact.html">Contact</a>
            <a href="./privacy.html">Privacy</a>
            <a href="./terms.html">Terms</a>
            <a href="./impressum.html">Imprint</a>
          </nav>
        </div>
      </footer>

	  <nav class="phone-bottom-nav" aria-label="Hauptnavigation" data-section="phone-bottom-nav">
	    <button class="phone-bottom-nav__btn" type="button" data-mode="board" aria-label="Board">
	      <span class="phone-bottom-nav__icon" aria-hidden="true">üè†</span>
	      <span class="phone-bottom-nav__label">Board</span>
	    </button>
	    <button class="phone-bottom-nav__btn" type="button" data-mode="subjects" aria-label="Subjects">
	      <span class="phone-bottom-nav__icon" aria-hidden="true">üìö</span>
	      <span class="phone-bottom-nav__label">Subjects</span>
	    </button>
	    <button class="phone-bottom-nav__btn" type="button" data-mode="today" aria-label="Today's focus">
	      <span class="phone-bottom-nav__icon" aria-hidden="true">‚úÖ</span>
	      <span class="phone-bottom-nav__label">Today</span>
	    </button>
	    <button class="phone-bottom-nav__btn" type="button" data-mode="schedule" aria-label="Schedule">
	      <span class="phone-bottom-nav__icon" aria-hidden="true">üóìÔ∏è</span>
	      <span class="phone-bottom-nav__label">Schedule</span>
	    </button>
	  </nav>

		  <script src="./src/storage.js"></script>
		  <script src="./src/assignments.js"></script>
		  <script src="./src/time-budget.js"></script>
			  <script src="./src/session-journal.js"></script>
		  <script src="./src/insights.js"></script>
		  <script src="./src/review-engine.js"></script>
		  <script src="./src/notifications.js"></script>
		  <script src="./src/data-tools.js"></script>
		  <script src="./src/a11y-utils.js"></script>
	  <script src="./src/sync.js"></script>
	  <script src="./src/index/index.part1.js"></script>
	  <script src="./src/index/index.part2.js"></script>
	  <script src="./src/index/index.part3.js"></script>
	  <script src="./src/index/index.part4.js"></script>
	  <script src="./src/phone/phone-nav.js"></script>
	</body>
</html>
