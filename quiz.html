<!DOCTYPE html>
<html lang="en" data-theme="breeze">
<head>
  <meta charset="UTF-8" />
  <title>Study Planner – Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2f62f4" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5073064276683221"
     crossorigin="anonymous"></script>
  <script>
    (function() {
      try {
        const adsDisabled = localStorage.getItem("studyAdsDisabled_v1") === "1";
        if (adsDisabled) document.documentElement.classList.add("ads-disabled");
      } catch (e) {}
    })();
  </script>
  <script>
    (function() {
      try {
        const savedTheme = localStorage.getItem("studyTheme_v1");
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
        }
      } catch (e) {}
    })();
  </script>
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="icon" href="/icons/icon-192.png" type="image/png" sizes="192x192" />
  <link rel="icon" href="/icons/app-icon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
  <script defer src="/pwa.js"></script>
  <link rel="stylesheet" href="./src/styles/main.css" />
  <link rel="stylesheet" href="./src/styles/mobile.css" />
  <link rel="stylesheet" href="./src/styles/ipad.css" />
  <link rel="stylesheet" href="./src/styles/phone-pages.css" />
  <link rel="stylesheet" href="./src/styles/phone-menu.css" />
  <link rel="stylesheet" href="./src/styles/phone-modals.css" />
  <link rel="stylesheet" href="./src/styles/a11y.css" />
  <link rel="stylesheet" href="./src/styles/enhancements.css" />
  <link rel="stylesheet" href="./src/styles/quiz.css" />
  <link rel="stylesheet" href="./src/styles/res-1024x768.css" />
  <link rel="stylesheet" href="./src/styles/res-1200x800.css" />
  <link rel="stylesheet" href="./src/styles/res-1280x720.css" />
  <link rel="stylesheet" href="./src/styles/res-1365x800.css" />
  <link rel="stylesheet" href="./src/styles/res-1366x768.css" />
  <link rel="stylesheet" href="./src/styles/res-1440x900.css" />
  <link rel="stylesheet" href="./src/styles/res-1536x864.css" />
  <link rel="stylesheet" href="./src/styles/res-1600x900.css" />
  <link rel="stylesheet" href="./src/styles/res-1680x1050.css" />
  <link rel="stylesheet" href="./src/styles/res-1920x1080.css" />
  <link rel="stylesheet" href="./src/styles/res-1920x1200.css" />
  <link rel="stylesheet" href="./src/styles/res-2560x1080.css" />
  <link rel="stylesheet" href="./src/styles/res-2560x1440.css" />
  <link rel="stylesheet" href="./src/styles/res-2560x1600.css" />
  <link rel="stylesheet" href="./src/styles/res-3440x1440.css" />
  <link rel="stylesheet" href="./src/styles/res-5120x1440.css" />
</head>
<body class="quiz-page">
  <aside class="ad-column ad-column-left" aria-label="Advertisement column"></aside>
  <aside class="ad-column ad-column-right" aria-label="Advertisement column"></aside>

  <div class="quiz-shell">
    <div class="header-row quiz-header">
      <div class="header-main">
        <p class="eyebrow">Knowledge check</p>
        <h1>Quiz hub</h1>
        <p class="subtitle">
          Import CSV question sets, shuffle them, and run focused multiple-choice sessions without leaving the Study Planner look and feel.
        </p>
      </div>
      <div class="header-actions">
        <a class="btn btn-secondary header-calendar-btn" href="index.html">← Back to board</a>
        <a class="btn btn-secondary header-calendar-btn" href="calendar.html">Calendar</a>
        <a class="btn btn-secondary header-calendar-btn" href="stundenplan.html">Stundenplan</a>
        <a class="btn btn-secondary header-calendar-btn" href="karteikarten.html">Karteikarten</a>
        <a class="btn btn-secondary header-calendar-btn" href="account.html">Account</a>
        <div class="header-menu" aria-label="Menu">
          <button class="header-menu-toggle" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Open menu">...</button>
          <div class="header-menu-panel">
            <div class="header-menu-group">
              <div class="header-menu-subtitle">Pages</div>
              <a class="header-menu-link" href="./index.html?mode=board">Board</a>
              <a class="header-menu-link" href="./index.html?mode=subjects">Subjects</a>
              <a class="header-menu-link" href="./index.html?mode=today">Today's focus</a>
              <a class="header-menu-link" href="./index.html?mode=schedule">Daily schedule</a>
            </div>
            <div class="header-menu-divider"></div>
            <div class="header-menu-group">
              <div class="header-menu-subtitle">Study hubs</div>
              <a class="header-menu-link" href="./calendar.html">Calendar</a>
              <a class="header-menu-link" href="./stundenplan.html">Stundenplan</a>
              <a class="header-menu-link" href="./karteikarten.html">Karteikarten</a>
              <a class="header-menu-link" href="./quiz.html" aria-current="page">Quiz</a>
              <a class="header-menu-link" href="./account.html">Account</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="quiz-layout">
      <aside class="quiz-sidebar">
        <div class="quiz-card">
          <div class="quiz-card-head">
            <div>
              <p class="eyebrow">Library</p>
              <h3>Saved quizzes</h3>
              <p class="subtitle">Click a set to select it.</p>
            </div>
            <div class="quiz-import">
              <label class="chip-btn">
                <span>Quiz hinzufügen</span>
                <input type="file" id="csvFile" accept=".csv,text/csv" />
              </label>
            </div>
          </div>
          <div id="savedQuizList" class="saved-list"></div>
        </div>
      </aside>

      <main class="quiz-main">
        <section class="quiz-card" id="importCard">
          <div class="quiz-card-head">
            <div>
              <p class="eyebrow">Import</p>
              <h2>Bring your questions</h2>
              <p class="subtitle">Upload a CSV, pick a quiz set, and choose how you want to shuffle.</p>
            </div>
            <div class="quiz-pill">Local CSV • Offline</div>
          </div>

        <div class="quiz-import-grid">
          <div class="quiz-field">
            <label class="quiz-label" for="quizSelect">Quiz set</label>
            <select id="quizSelect" class="quiz-input" disabled>
              <option value="">Import first…</option>
            </select>
            <div class="quiz-check-row">
              <label class="quiz-check"><input type="checkbox" id="modeExam" /> <span>Exam mode (feedback at end)</span></label>
            </div>
          </div>
        </div>

        <div class="quiz-actions">
          <div class="quiz-buttons">
            <button class="btn" id="startBtn" type="button" disabled>Start quiz</button>
            <button class="btn btn-secondary" id="resetBtn" type="button" disabled>Reset</button>
          </div>
          <div class="quiz-status" id="importStatus">Ready. Import a CSV to begin.</div>
        </div>

        <details class="quiz-details">
          <summary>CSV format</summary>
          <div class="quiz-details-body">
            <p class="quiz-help">
              Recommended columns: <code>question</code>, <code>choice_A</code>, <code>choice_B</code>, optional <code>choice_C</code>, <code>choice_D</code>,
              plus <code>correct_letter</code> (A-D) or <code>correct_index</code> (0-based). Optional: <code>hint</code>, <code>quiz</code>.
            </p>
            <pre class="quiz-code">quiz;question_no;question;choice_A;choice_B;choice_C;choice_D;correct_letter;hint
Quiz 1;1;Was ist ...?;Aussage 1;Aussage 2;Aussage 3;;A;Denke an ...</pre>
          </div>
        </details>
        </section>

        <section class="quiz-card hidden" id="quizCard" aria-live="polite">
        <div class="quiz-stage-head">
          <div>
            <p class="eyebrow">Session</p>
            <h2 id="quizTitle">Quiz</h2>
            <p class="subtitle" id="quizMeta">0 questions</p>
          </div>
          <div class="quiz-scorebox">
            <div class="quiz-score-label">Score</div>
            <div class="quiz-score-value" id="scoreText">0 / 0</div>
          </div>
        </div>

        <div class="quiz-progress">
          <div class="quiz-progress-bar" id="progressBar" style="width:0%"></div>
        </div>

        <article class="quiz-question">
          <div class="quiz-question-head">
            <span class="quiz-pill" id="qCounter">Question 1</span>
            <button class="chip-btn" id="hintBtn" type="button" disabled>Hint</button>
          </div>

          <h3 class="quiz-question-text" id="questionText">—</h3>
          <p class="quiz-hint hidden" id="hintText"></p>

          <div class="quiz-choices" id="choices"></div>

          <div class="quiz-feedback" id="feedback" role="status" aria-live="polite"></div>

          <div class="quiz-nav">
            <button class="btn btn-secondary" id="prevBtn" type="button" disabled>Back</button>
            <button class="btn" id="nextBtn" type="button" disabled>Next</button>
            <button class="chip-btn chip-btn-primary" id="finishBtn" type="button">Finish</button>
          </div>
        </article>
        </section>

        <section class="quiz-card hidden" id="resultCard">
        <div class="quiz-card-head">
          <div>
            <p class="eyebrow">Review</p>
            <h2>Results</h2>
            <p class="subtitle" id="resultSummary">—</p>
          </div>
          <div class="quiz-buttons">
            <button class="btn" id="restartBtn" type="button">Play again</button>
            <button class="btn btn-secondary" id="backToImportBtn" type="button">New CSV / set</button>
          </div>
        </div>

        <details class="quiz-details" open>
          <summary>Incorrect answers</summary>
          <div class="quiz-details-body" id="reviewList"></div>
        </details>
        </section>
      </main>
    </div>
  </div>

  <div class="quiz-modal" id="quizManageModal" aria-hidden="true">
    <div class="quiz-modal-backdrop"></div>
    <div class="quiz-modal-dialog" role="dialog" aria-modal="true" aria-labelledby="quizManageTitle">
      <div class="quiz-modal-head">
        <div>
          <p class="eyebrow">Options</p>
          <h3 id="quizManageTitle">Edit quiz</h3>
        </div>
        <button class="chip-btn" id="quizManageClose" type="button">Close</button>
      </div>
      <div class="quiz-modal-body">
        <label class="quiz-label">Name
          <input type="text" id="quizManageName" class="quiz-input" />
        </label>
        <label class="quiz-label">Link to subject (optional)
          <select id="quizManageSubject" class="quiz-input"></select>
        </label>
        <label class="quiz-label">Link to task/file (optional)
          <select id="quizManageTask" class="quiz-input"></select>
        </label>
        <div class="quiz-help">Rename your saved quiz or remove it from the library.</div>
      </div>
      <div class="quiz-modal-actions">
        <button class="btn" id="quizManageSave" type="button">Save</button>
        <button class="btn btn-secondary" id="quizManageDelete" type="button">Remove</button>
      </div>
    </div>
  </div>

  <script src="./src/a11y-utils.js" defer></script>
  <script src="./src/page-menu.js" defer></script>
  <script src="./src/quiz.js" defer></script>
</body>
</html>
