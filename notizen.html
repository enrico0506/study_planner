<!DOCTYPE html>
<html lang="en" data-theme="breeze">
<head>
  <meta charset="UTF-8" />
  <title>Study Planner - Notizen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2f62f4" />
  <script>
    (function() {
      try {
        const savedTheme = localStorage.getItem("studyTheme_v1");
        if (savedTheme) {
          document.documentElement.setAttribute("data-theme", savedTheme);
        }
      } catch (e) {}
    })();
  </script>
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./public/icons/app-icon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="./src/styles/main.css" />
  <link rel="stylesheet" href="./src/styles/mobile.css" />
  <link rel="stylesheet" href="./src/styles/phone-pages.css" />
  <link rel="stylesheet" href="./src/styles/phone-menu.css" />
  <link rel="stylesheet" href="./src/styles/phone-modals.css" />
  <link rel="stylesheet" href="./src/styles/a11y.css" />
  <link rel="stylesheet" href="./src/styles/enhancements.css" />
  <link rel="stylesheet" href="./src/styles/notizen.css" />
</head>
<body class="notizen-page">
  <div class="notes-shell">
    <div class="header-row notes-header">
      <div class="header-main">
        <p class="eyebrow">Docs-light</p>
        <h1>Notizen</h1>
        <p class="subtitle">
          Rich-Text Notizen mit Autosave. Links, Überschriften, Listen - und dein Timer bleibt gespiegelt.
        </p>
      </div>
      <div class="header-actions">
        <a class="btn btn-secondary header-calendar-btn" href="./index.html">← Back to board</a>
        <div class="header-menu" aria-label="Menu">
          <button class="header-menu-toggle" type="button" aria-haspopup="true" aria-expanded="false" aria-label="Open menu">...</button>
          <div class="header-menu-panel">
            <div class="header-menu-group">
              <div class="header-menu-subtitle">Pages</div>
              <a class="header-menu-link" href="./index.html?mode=board">Board</a>
              <a class="header-menu-link" href="./index.html?mode=subjects">Subjects</a>
              <a class="header-menu-link" href="./index.html?mode=today">Today's focus</a>
              <a class="header-menu-link" href="./index.html?mode=schedule">Daily schedule</a>
            </div>
            <div class="header-menu-divider"></div>
            <div class="header-menu-group">
              <div class="header-menu-subtitle">Study hubs</div>
              <a class="header-menu-link" href="./calendar.html">Calendar</a>
              <a class="header-menu-link" href="./stundenplan.html">Stundenplan</a>
              <a class="header-menu-link" href="./karteikarten.html">Karteikarten</a>
              <a class="header-menu-link" href="./notizen.html">Notizen</a>
              <a class="header-menu-link" href="./account.html">Account</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="notes-layout">
      <aside class="notes-sidebar">
        <div class="notes-sidebar-head">
          <div>
            <div class="notes-sidebar-title">Dokumente</div>
            <div class="notes-sidebar-subtitle">Titel & letzte Änderung</div>
          </div>
          <div class="notes-sidebar-actions">
            <button class="chip-btn" id="newFolderToggleBtn" type="button">Neuer Ordner</button>
            <button class="chip-btn chip-btn-primary" id="newDocBtn" type="button">Neues Dokument</button>
          </div>
        </div>
        <div class="notes-folder-block">
          <div class="notes-folder-head">
            <div class="notes-folder-label">Ordner</div>
          </div>
          <div class="notes-folder-new" id="newFolderForm" hidden>
            <input id="newFolderInput" type="text" placeholder="Ordnername" />
            <label class="notes-folder-subject">
              Fach (optional)
              <select id="folderSubjectSelect"></select>
            </label>
            <div class="notes-folder-new-actions">
              <button class="chip-btn chip-btn-primary" id="saveFolderBtn" type="button">Speichern</button>
              <button class="chip-btn" id="cancelFolderBtn" type="button">Abbrechen</button>
              <span class="notes-folder-hint" id="folderFormHint"></span>
            </div>
          </div>
          <div class="notes-folder-list" id="folderList"></div>
        </div>
        <div class="notes-doc-list" id="docList"></div>
      </aside>

      <section class="notes-main">
        <div class="notes-topbar">
          <div class="notes-title-block">
            <input id="docTitleInput" class="notes-title-input" type="text" placeholder="Dokumenttitel" aria-label="Dokumenttitel" />
            <div class="notes-save-row">
              <span class="notes-save-status" id="saveStatus">Saved</span>
              <div class="notes-delete-inline" id="deleteConfirm" hidden>
                <span>Sicher löschen?</span>
                <button class="chip-btn" id="cancelDeleteBtn" type="button">Abbrechen</button>
                <button class="chip-btn chip-btn-danger" id="confirmDeleteBtn" type="button">Löschen</button>
              </div>
            </div>
            <div class="notes-link-row">
              <label>
                Ordner
                <select id="docFolderSelect"></select>
              </label>
              <label>
                Fach
                <select id="docSubjectSelect"></select>
              </label>
              <label>
                Datei
                <select id="docFileSelect"></select>
              </label>
              <button class="chip-btn chip-btn-primary" id="startStudyBtn" type="button">Start study</button>
              <button class="chip-btn" id="pauseStudyBtn" type="button">Pause</button>
            </div>
            <div class="notes-status" id="notesStatus" role="status" aria-live="polite"></div>
          </div>
          <div class="notes-top-right">
            <button class="chip-btn" id="deleteDocBtn" type="button">Dokument löschen</button>
            <div class="notes-timer" id="timerMirror">
              <div class="notes-timer-label" id="timerLabel">No active session</div>
              <div class="notes-timer-time" id="timerTime">00:00:00</div>
              <div class="notes-timer-meta" id="timerMeta">Start a session on the main page.</div>
            </div>
          </div>
        </div>

        <div class="notes-toolbar" id="notesToolbar" aria-label="Format toolbar">
          <label class="notes-import-btn" for="importInput">Import</label>
          <input id="importInput" type="file" accept=".md,.markdown,.ipynb,.docx,.pdf" hidden />
          <button class="notes-tool-btn" type="button" data-cmd="bold" aria-label="Fett"><strong>B</strong></button>
          <button class="notes-tool-btn" type="button" data-cmd="italic" aria-label="Kursiv"><em>I</em></button>
          <button class="notes-tool-btn" type="button" data-cmd="underline" aria-label="Unterstreichen"><u>U</u></button>
          <span class="notes-tool-divider" aria-hidden="true"></span>
          <button class="notes-tool-btn" type="button" data-cmd="formatBlock" data-value="H1">H1</button>
          <button class="notes-tool-btn" type="button" data-cmd="formatBlock" data-value="H2">H2</button>
          <button class="notes-tool-btn" type="button" data-cmd="formatBlock" data-value="P">Para</button>
          <span class="notes-tool-divider" aria-hidden="true"></span>
          <button class="notes-tool-btn" type="button" data-cmd="insertUnorderedList" aria-label="Bullet List">Bullets</button>
          <button class="notes-tool-btn" type="button" data-cmd="insertOrderedList" aria-label="Numbered List">1. List</button>
          <span class="notes-tool-divider" aria-hidden="true"></span>
          <button class="notes-tool-btn" type="button" data-action="link" aria-label="Link einfügen">Link</button>
          <button class="notes-tool-btn" type="button" data-cmd="unlink" aria-label="Link entfernen">Unlink</button>
          <span class="notes-tool-divider" aria-hidden="true"></span>
          <button class="notes-tool-btn" type="button" data-cmd="undo" aria-label="Undo">Undo</button>
          <button class="notes-tool-btn" type="button" data-cmd="redo" aria-label="Redo">Redo</button>
          <button class="notes-tool-btn" type="button" data-action="clear" aria-label="Formatierung entfernen">Clear</button>
        </div>

        <div class="notes-editor-shell">
          <div id="docEditor" class="notes-editor" contenteditable="true" aria-label="Dokumentinhalt" data-placeholder="Schreibe Rich-Text Notizen..."></div>
        </div>
      </section>
    </div>
  </div>

  <div class="notes-modal" id="linkModal" aria-hidden="true">
    <div class="notes-modal-backdrop" id="linkModalBackdrop"></div>
    <div class="notes-modal-dialog" role="dialog" aria-modal="true" aria-labelledby="linkModalTitle">
      <div class="notes-modal-head">
        <div>
          <div class="modal-label">Link</div>
          <div class="modal-title" id="linkModalTitle">URL einfügen</div>
          <div class="modal-subtitle">Füge eine Webadresse oder lokale Datei ein.</div>
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="closeLinkModalBtn" type="button">Cancel</button>
        </div>
      </div>
      <div class="notes-modal-body">
        <label class="notes-modal-field">
          URL
          <input id="linkInput" type="url" placeholder="https://..." />
        </label>
      </div>
      <div class="notes-modal-actions">
        <button class="btn btn-secondary" id="cancelLinkBtn" type="button">Cancel</button>
        <button class="btn" id="insertLinkBtn" type="button">Insert</button>
      </div>
    </div>
  </div>

  <script src="./src/storage.js" defer></script>
  <script src="./src/pwa.js" defer></script>
  <script src="./src/a11y-utils.js" defer></script>
  <script src="./src/sync.js" defer></script>
  <script src="./src/page-menu.js" defer></script>
  <script src="./src/notizen.js" defer></script>
</body>
</html>
